### User Guide for Setting Up Nexus Repository Server Using Docker

This guide will help you install Docker on your Nexus VM and set up the Nexus Repository server.

#### Step 1: Install Docker on Nexus VM

**Search for Docker Installation Instructions**

1. Open your web browser and search for "Install Docker on Ubuntu".
2. Click on the official Docker documentation link: [Install Docker on Ubuntu](https://docs.docker.com/engine/install/ubuntu/).

**Create a Shell Script for Docker Installation**

1. Log in to your Nexus VM via SSH:
   ```sh
   ssh ubuntu@your_nexus_vm_ip
   ```
2. Create a shell script file for Docker installation:
   ```sh
   vi docker.sh
   ```

3. **Copy the following script from the Docker documentation and paste it into the `docker.sh` file:**

   ```sh
   #!/bin/bash

   # Update package manager repositories
   sudo apt-get update

   # Install necessary dependencies
   sudo apt-get install -y ca-certificates curl

   # Create directory for Docker GPG key
   sudo install -m 0755 -d /etc/apt/keyrings

   # Download Docker's GPG key
   sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc

   # Ensure proper permissions for the key
   sudo chmod a+r /etc/apt/keyrings/docker.asc

   # Add Docker repository to Apt sources
   echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
   $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
   sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

   # Update package manager repositories
   sudo apt-get update

   # Install Docker packages
   sudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
   ```

4. Save the file and exit the text editor by pressing `Esc`, typing `:wq`, and hitting `Enter`.

**Make the Script Executable**

1. Give execute permission to the script:
   ```sh
   sudo chmod +x docker.sh
   ```

**Run the Docker Installation Script**

1. Execute the script to install Docker:
   ```sh
   ./docker.sh
   ```

By following these steps, Docker will be installed on your Nexus VM. You can verify the installation by running:

```sh
docker --version
```

This command should display the installed version of Docker, confirming that the installation was successful. 

### Step 2: Set Up the Nexus Repository Server Using Docker

**Pull the Nexus Docker Image**

1. Pull the Nexus Repository Manager image from Docker Hub:
   ```sh
   docker pull sonatype/nexus3
   ```

**Run Nexus Repository Container**

1. Create and start a new Nexus Repository container:
   ```sh
   docker run -d -p 8081:8081 --name nexus -v nexus-data:/nexus-data sonatype/nexus3
   ```

   - The `-d` flag runs the container in detached mode.
   - The `-p 8081:8081` maps port 8081 on the host to port 8081 on the container.
   - The `--name nexus` names the container "nexus".
   - The `-v nexus-data:/nexus-data` mounts a volume named `nexus-data` to persist Nexus data.

**Verify Nexus Repository Server**

1. Open your web browser and go to:
   ```
   http://your_nexus_vm_ip:8081
   ```
   You should see the Nexus Repository Manager login page.

**Default Credentials**

- Username: `admin`
- Password: The initial admin password is located in the file `/nexus-data/admin.password` inside the container. You can retrieve it by running:
  ```sh
  docker exec -it nexus cat /nexus-data/admin.password
  ```

### Conclusion

By following this guide, you have installed Docker on your Nexus VM and set up the Nexus Repository server using Docker. You can now start using Nexus to manage your repositories.
